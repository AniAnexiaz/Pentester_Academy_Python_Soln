#!/usr/bin/env python 

import socketserver

import sys

serverAddr=(sys.argv[1], int(sys.argv[2]))

class TCPHandler(socketserver.BaseRequestHandler):
    def handle(self):
        msg='dummy'
        while len(msg):
            msg=self.request.recv(1024).decode('utf-8')
            print(msg)
            self.request.send(msg.encode())
        else:
            print("Client left")
class ThreadedTCPHandler(socketserver.ThreadingMixIn,socketserver.TCPServer):
    pass

server=ThreadedTCPHandler(serverAddr,TCPHandler)
server.serve_forever()

