#!/usr/bin/env python
""" Simple single client echo server in python"""
import socket
import sys
import threading
try:
    HOST =socket.gethostbyname(sys.argv[1])
    PORT =int(sys.argv[2])
except:
    print(" ./filename.py [HOST IP] [HOST PORT]")
def handler(client):
    msg='dummy'

    while len(msg):
        msg=client.recv(1024).decode('utf-8')
        print(msg)
        client.send(msg.encode())
    else:
        client.close()



echosocket=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
echosocket.bind((HOST,PORT))
echosocket.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
echosocket.listen(5)
while True:
    client,addr=echosocket.accept()
    t=threading.Thread(target=handler,args=(client,))
    t.start()





